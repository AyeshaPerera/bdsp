{% extends 'base.html' %}
{% block style %}
{% load static %}
<link rel="stylesheet" href="{% static 'base.css' %}" type="text/css" />
<link rel="stylesheet" href="{% static 'details.css' %}" type="text/css" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

{% endblock %}

{% block header %}
<main>
  <div class="jumbotron jumbotron-fluid shadow p-3 pt-5 mb-5 bg-gr-bp">
    <div class="container text-white mt-5">
      <h1>{{ org.Name }}</h1>
      <h3 class="lead">{{ org.Region }}, {{ org.Address }}</h3>
    </div>
  </div>
</main>
{% endblock %}

{% block content %}

<article>
  <section class="shadow p-3 mb-5 bg-white rounded">
    {% if user.is_authenticated %}
    <div class="row">
      <a class="ml-auto mr-2" href="{% url 'editPage' org.id %}">
        <i class="material-icons">
          edit
        </i>
      </a>
    </div>
    {% endif %}


    <div class="table-responsive">

      <table class="table table-borderless">
        <tbody>
          <tr>
            <th class="lead" scope="row">Industory</th>

            <td>{% for industry in org.Industry.all %}
              {{ industry.Name }}{% if not forloop.last %}, {% endif %}
              {% endfor %}</td>

          </tr>
          <tr>
            <th class="lead" scope="row">Service</th>
            <td>
              {% for service in org.ServiceCategory.all %}

              <span>{{ service.Name }}{% if not forloop.last %}, {% endif %} </span>

              {% endfor %}
            </td>
          </tr>
          <tr>
            <th class="lead" scope="row">PR</th>
            <td>{{ org.PR }}</td>
          </tr>
          <tr>
            <th class="lead" scope="row">Registration Date</th>
            <td>{{ org.RegistrationDate|date:"Y-m-d" }}</td>
          </tr>
          <tr>
            <th class="lead" scope="row">Affiliation</th>
            <td>{{ org.Affiliation }}</td>
          </tr>
          <tr>
            <th class="lead" scope="row">URL</th>
            <td>
              <a href="{{ org.Url }}">{{ org.Url }}</a>
            </td>
          </tr>
          <tr>
            <th class="lead" scope="row">Contact</th>
            <td>
              <span>{{ org.ContactPerson }}</span>
              <span>,&nbsp; Email:{{ org.Email }}</span>
              <span>,&nbsp; Tel:{{ org.Telephone }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <h2><small>Services</small> </h2>
  <section class="shadow p-3 mb-5 bg-white rounded">
    {% if user.is_authenticated %}
    <div class="row">
      <a class="ml-auto mr-2" href="{% url 'service_create' org.id %}">
        <i class="material-icons">
          add
        </i>
      </a>
    </div>
    {% endif %}

    <div class="table-responsive">
      <table class="table table-hover mt-5">
        <thead>
          <tr>
            <th class="lead" scope="col">Service Category</th>
            <th class="lead" scope="col">Service</th>
            <th class="lead" scope="col">Contents</th>
            <th class="lead" scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% if services %}
          {% for service in services %}
          <tr>
            <td>{{ service.ServiceCategory }}</td>
            <td>{{ service.Service }}</td>
            <td>{{ service.Contents }}</td>
            <td>
              {% if user.is_authenticated %}
              <div class="row">
                <a class="ml-auto mr-2" href="{% url 'service_update' service.id %}">
                  <i class="material-icons">
                    edit
                  </i>
                </a>

                <!-- <button data-toggle="modal" data-target="#exampleModalCenter"> -->
                <button class="dontBeLikeButton">
                  <i class="material-icons" data-toggle="modal" data-target="#exampleModalCenter">
                    delete
                  </i>
                </button>
                <!--</button>

      <!-- Modal -->
                <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Confirm Deletion</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>

                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <a class="ml-auto mr-2" href="{% url 'service_delete' service.id %}">
                          <button type="button" class="btn btn-primary">
                            Delete
                          </button>
                        </a>

                      </div>
                    </div>
                  </div>
                </div>

              </div>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
  </section>

  <h2><small>Experience</small></h2>
  <section class="shadow p-3 mb-5 bg-white rounded">
    {% if user.is_authenticated %}
    {% if experiences %}
    {% for experience in experiences %}
    <div class="row">
      <a class="ml-auto mr-2" href="{% url 'experience_update' experience.id %}">
        <i class="material-icons">
          edit
        </i>
      </a>
    </div>
    {% endfor %}
    {% else %}
    <div class="row">
      <a class="ml-auto mr-2" href="{% url 'experience_create' org.id %}">
        <i class="material-icons">
          add
        </i>
      </a>
    </div>
    {% endif %}
    {% endif %}

    <div class="table-responsive">
      <table class="table table-hover mt-5">
        <thead>
          <tr>
            <th class="lead" scope="col">Large</th>
            <th class="lead" scope="col">Medium</th>
            <th class="lead" scope="col">SmallandMicro</th>
          </tr>
        </thead>
        <tbody>
          {% for experience in experiences %}
          <tr>
            <td>{{ experience.Large }}</td>
            <td>{{ experience.Medium }}</td>
            <td>{{ experience.SmallandMicro }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

  <h2><small>Cases</small></h2>
  <section class="shadow p-3 mb-5 bg-white rounded">
    {% if user.is_authenticated %}
    <div class="row">
      <a class="ml-auto mr-2" href="{% url 'case_create' org.id %}">
        <i class="material-icons">
          add
        </i>
      </a>
    </div>
    {% endif %}
    <div class="table-responsive">
      <table class="table table-hover mt-5">
        <thead>
          <tr>
            <th class="lead" scope="col">ServiceCategory</th>
            <th class="lead" scope="col">Contents</th>
            <th class="lead" scope="col">Result</th>
          </tr>
        </thead>
        <tbody>
          {% if cases %}
          {% for case in cases %}
          <tr>
            <td>{{ case.ServiceCategory.Name }}</td>
            <td>{{ case.Contents }}</td>
            <td>{{ case.Result }}</td>
            {% if user.is_authenticated %}
            <td>

              <div class="row">
                <a class="ml-auto mr-2" href="{% url 'case_update' case.id %}">
                  <i class="material-icons">
                    edit
                  </i>
                </a>
                <!-- <button data-toggle="modal" data-target="#exampleModalCenter"> -->
                <button class="dontBeLikeButton">
                  <i class="material-icons" data-toggle="modal" data-target="#exampleModalCenter">
                    delete
                  </i>
                </button>
                <!--</button>

              <!-- Modal -->
                <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Confirm Deletion</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>

                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <a class="ml-auto mr-2" href="{% url 'case_delete' case.id %}">
                          <button type="button" class="btn btn-primary">
                            Delete
                          </button>
                        </a>

                      </div>
                    </div>
                  </div>
                </div>

              </div>
            <td>
              {% endif %}
          </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
  </section>
</article>


{% endblock %}